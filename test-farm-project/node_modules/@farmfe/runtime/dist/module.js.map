{"version":3,"file":"module.js","sourceRoot":"","sources":["../src/module.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nexport class Module {\n  id: string;\n  exports: any;\n  // initialize promise if this module is a async module\n  initializer: Promise<any> | undefined;\n  resource_pot: string = \"\";\n  meta: Record<string, any>;\n  require: (id: string) => any;\n\n  constructor(id: string, require: (id: string) => any) {\n    this.id = id;\n    this.exports = {};\n    this.meta = {\n      env: {}\n    };\n    this.require = require;\n  }\n\n  o(to: any, to_k: string, get: () => any) {\n    Object.defineProperty(to, to_k, {\n      enumerable: true,\n      get\n    });\n  }\n\n  // exports.xx = xx\n  d(to: any, to_k: string, val: any) {\n    this.o(to, to_k, function () {\n      return val;\n    });\n  }\n\n  // exports.__esModule\n  _m(to: any) {\n    const key = '__esModule';\n    if (to[key]) return;\n    Object.defineProperty(to, key, { value: true });\n  }\n\n  // `export * from` helper\n  _e(to: any, from: any) {\n    Object.keys(from).forEach(function (k) {\n      if (k !== \"default\" && !Object.prototype.hasOwnProperty.call(to, k)) {\n        Object.defineProperty(to, k, { value: from[k], enumerable: true, configurable: true });\n      }\n    });\n\n    return from;\n  }\n\n  // `import xxx from` helper\n  i(obj: any) {\n    return obj && obj.__esModule ? obj : { default: obj };\n  }\n  // `import * as xx` helper, copied from @swc/helper\n  _g(nodeInterop: any) {\n    if (typeof WeakMap !== \"function\") return null;\n\n    var cacheBabelInterop = new WeakMap();\n    var cacheNodeInterop = new WeakMap();\n\n    return (this._g = function (nodeInterop) {\n      return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n    })(nodeInterop);\n  }\n  // `import * as xx` helper, copied from @swc/helper\n  w(obj: any, nodeInterop: any) {\n    if (!nodeInterop && obj && obj.__esModule) return obj;\n    if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") return { default: obj };\n\n    var cache = this._g(nodeInterop);\n\n    if (cache && cache.has(obj)) return cache.get(obj);\n\n    var newObj: any = { __proto__: null };\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n    for (var key in obj) {\n        if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n            if (desc && (desc.get || desc.set)) Object.defineProperty(newObj, key, desc);\n            else newObj[key] = obj[key];\n        }\n    }\n\n    newObj.default = obj;\n\n    if (cache) cache.set(obj, newObj);\n\n    return newObj;\n}\n\n  // `export { xx } from` helper\n  _(to: any, to_k: string, from: any, from_k: string) {\n    this.d(to, to_k, from[from_k || to_k]);\n  }\n\n  // revert imports/exports minify helper\n  p(to: Record<string, string>, val: any) {\n    for (const key of Object.keys(val)) {\n      const newKey = to[key];\n      if (newKey && !Object.prototype.hasOwnProperty.call(val, newKey)) {\n        this.d(val, newKey, val[key]);\n      }\n    }\n  }\n\n  // minify x.default\n  f(v: any) {\n    if(typeof v.default !== 'undefined') {\n      return v.default;\n    }\n\n    // compatible `import default from \"module\"`\n    return v;\n  }\n}\n"]}