{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":"AAIA,OAAO,EAAE,SAAS,EAAE,MAAM,iBAAiB,CAAC;AAC5C,OAAO,EAAE,gBAAgB,EAAE,MAAM,uBAAuB,CAAC;AAEzD,IAAI,SAAoB,CAAC;AAEzB,eAAwB;IACtB,IAAI,EAAE,gCAAgC;IACtC,SAAS,CAAC,YAAY;QACpB,SAAS,GAAG,IAAI,SAAS,CAAC,YAAY,CAAC,CAAC;QACxC,SAAS,CAAC,OAAO,EAAE,CAAC;IACtB,CAAC;IACD,aAAa,CAAC,MAAM;QAClB,uCAAuC;QACvC,MAAM,CAAC,IAAI,CAAC,GAAG,GAAG,gBAAgB,CAAC,MAAM,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;IAC3D,CAAC;CACD,CAAC","sourcesContent":["/**\n * HMR client as a Farm Runtime Plugin\n */\nimport type { Plugin } from '@farmfe/runtime';\nimport { HmrClient } from './hmr-client.js';\nimport { createHotContext } from './hot-module-state.js';\n\nlet hmrClient: HmrClient;\n\nexport default (<Plugin>{\n  name: 'farm-runtime-hmr-client-plugin',\n  bootstrap(moduleSystem) {\n    hmrClient = new HmrClient(moduleSystem);\n    hmrClient.connect();\n  },\n  moduleCreated(module) {\n    // create a hot context for each module\n    module.meta.hot = createHotContext(module.id, hmrClient);\n  }\n});\n"]}